. use $data, clear;
.         * Generate non urbanised area variables;
.         gen l_ln_km_IHNU_83  = ln(ln_km_IH_83 - ln_km_IHU_83);
(50 missing values generated)
.         gen l_rd_km_IHNU_83  = ln(rd_km_IH_83 - rd_km_IHU_83);
(50 missing values generated)
.         gen l_vmt_IHNU_83 = ln(vmt_IH_83 - vmt_IHU_83);
(50 missing values generated)
.         gen l_aadt_IHNU_83 = l_vmt_IHNU_83 - l_rd_km_IHNU_83 ;
(50 missing values generated)
.         gen l_ln_km_IHNU_93  = ln(ln_km_IH_93 - ln_km_IHU_93);
(39 missing values generated)
.         gen l_rd_km_IHNU_93  = ln(rd_km_IH_93 - rd_km_IHU_93);
(39 missing values generated)
.         gen l_vmt_IHNU_93 = ln(vmt_IH_93 - vmt_IHU_93);
(39 missing values generated)
.         gen l_aadt_IHNU_93 = l_vmt_IHNU_93 - l_rd_km_IHNU_93 ;
(39 missing values generated)
.         gen l_ln_km_IHNU_03  = ln(ln_km_IH_03 - ln_km_IHU_03);
(38 missing values generated)
.         gen l_rd_km_IHNU_03  = ln(rd_km_IH_03 - rd_km_IHU_03);
(38 missing values generated)
.         gen l_vmt_IHNU_03 = ln(vmt_IH_03 - vmt_IHU_03);
(38 missing values generated)
.         gen l_aadt_IHNU_03 = l_vmt_IHNU_03 - l_rd_km_IHNU_03 ;
(38 missing values generated)
.         * Selection of observations;
.         drop if l_ln_km_IH_83==0;
(47 observations deleted)
.         gen zero = min(l_ln_km_IH_83,l_ln_km_IH_93,l_ln_km_IHU_83,l_ln_km_IHU_93,l_ln_km_MRU_83,l_ln_km_MRU_93,l_ln_km_IHNU_83,l_ln_km_IHNU_93);
.         rename sprawl_1992 sprawl_2003;
.         rename sprawl_1976 sprawl_1993;
.         *rescale so display is better;
.         replace elevat_range_msa = elevat_range_msa/1000;
variable elevat_range_msa was int now float
(228 real changes made)
.         replace ruggedness_msa = ruggedness_msa/1000;
(228 real changes made)
.         replace heating_dd = heating_dd/100;
(228 real changes made)
.         replace cooling_dd = cooling_dd/100;
(228 real changes made)
.         *Generate first differences;
.         gen  Dl_ln_IH_1993 = l_ln_km_IH_93 - l_ln_km_IH_83;
.         gen  Dl_ln_IH_2003 = l_ln_km_IH_03 - l_ln_km_IH_93;
.         gen  Dl_vmt_IH_1993 = l_vmt_IH_93 - l_vmt_IH_83;
.         gen  Dl_vmt_IH_2003 = l_vmt_IH_03 - l_vmt_IH_93;
.         gen  Dl_aadt_IH_1993 = l_aadt_IH_93 - l_aadt_IH_83;
.         gen  Dl_aadt_IH_2003 = l_aadt_IH_03 - l_aadt_IH_93;
.         gen Dl_pop_1993 = l_pop90 -l_pop80;
.         gen Dl_pop_2003 = l_pop00 -l_pop90;
.       gen l_pop_1983 = l_pop80;
.        gen l_pop_1993 = l_pop90;
.        gen l_pop_2003 = l_pop00;
.         gen g_exp_2003=g_exp00_90;
.         gen g_exp_1993=g_exp90_80;
.       rename l_aadt_IH_83 l_aadt_IH_1993;
.       rename l_aadt_IH_93 l_aadt_IH_2003;
.         rename S_somecollege_80 S_somecollege_1993;
.         rename l_mean_income_80 l_mean_income_1993;
.         rename S_poor_80 S_poor_1993;
.         rename S_manuf83 S_manuf_1993;
.         rename S_somecollege_90 S_somecollege_2003;
.         rename l_mean_income_90 l_mean_income_2003;
.         rename S_poor_90 S_poor_2003;
.         rename S_manuf93 S_manuf_2003;
.         reshape long Dl_ln_IH Dl_aadt_IH l_aadt_IH 
>                  sprawl S_somecollege l_mean_income S_poor S_manuf g_exp
>                          Dl_pop l_pop, i(msa ) j(year _1993 _2003);

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              228   ->   456         
Number of variables                 239   ->   229         
j variable (2 values)                     ->   year
xij variables:
            Dl_ln_IH_1993 Dl_ln_IH_2003   ->   Dl_ln_IH
        Dl_aadt_IH_1993 Dl_aadt_IH_2003   ->   Dl_aadt_IH
          l_aadt_IH_1993 l_aadt_IH_2003   ->   l_aadt_IH
                sprawl_1993 sprawl_2003   ->   sprawl
  S_somecollege_1993 S_somecollege_2003   ->   S_somecollege
  l_mean_income_1993 l_mean_income_2003   ->   l_mean_income
                S_poor_1993 S_poor_2003   ->   S_poor
              S_manuf_1993 S_manuf_2003   ->   S_manuf
                  g_exp_1993 g_exp_2003   ->   g_exp
                Dl_pop_1993 Dl_pop_2003   ->   Dl_pop
                  l_pop_1993 l_pop_2003   ->   l_pop
-----------------------------------------------------------------------------
.         local geography  "elevat_range_msa ruggedness_msa heating_dd cooling_dd sprawl";
.         local demographics  "S_somecollege l_mean_income seg1980_ghetto S_poor S_manuf"  ;
.         local population "l_pop80 l_pop70 l_pop60 l_pop50 l_pop40 l_pop30 l_pop20"  ;
.         local census_div "div1 div2 div3 div4 div5 div6 div7 div8 div9";
.         *instructions for outreg;
.         local instruct "tex tdec(2) rdec(2) auto(2) symbol($^a$,$^b$,$^c$) se ";
.         local instruct2 "tex tdec(2) rdec(2) auto(2) symbol($^a$,$^b$,$^c$) se addstat(Overid, e(widstat))";
.  *      local instruct2 "tex tdec(2) rdec(2) auto(2) symbol($^a$,$^b$,$^c$) se addstat(Overid,e(jp),First stage F, e(widstat))";
.         iis msa;
.         local R "IH";
.         capture drop Dl_aadt Dl_ln l_aadt ;
.         gen Dl_aadt = Dl_aadt_`R' ;
.         gen Dl_ln  = Dl_ln_`R' ;
.         gen l_aadt = l_aadt_`R' ;
.         local t8 = 1;
.         xi: reg    Dl_aadt l_aadt i.year, cl(msa) robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)

Linear regression                               Number of obs     =        456
                                                F(2, 227)         =      55.52
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2578
                                                Root MSE          =     .16149

                                  (Std. err. adjusted for 228 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
     Dl_aadt | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      l_aadt |  -.1111737    .019455    -5.71   0.000    -.1495092   -.0728383
    _Iyear_2 |   -.097399   .0150856    -6.46   0.000    -.1271247   -.0676733
       _cons |   1.351319   .1676114     8.06   0.000     1.021046    1.681592
------------------------------------------------------------------------------
.         outreg2    l_aadt using revision/table7.xls,ctitle(OLS `R')  `instruct' replace;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  .
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .2578493
.         local t8=`t8'+1;
.         xi: reg    Dl_aadt l_aadt Dl_pop i.year, cl(msa) robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)

Linear regression                               Number of obs     =        456
                                                F(3, 227)         =      42.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.3174
                                                Root MSE          =     .15504

                                  (Std. err. adjusted for 228 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
     Dl_aadt | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      l_aadt |  -.1174469   .0199064    -5.90   0.000    -.1566718    -.078222
      Dl_pop |   .3803687     .10396     3.66   0.000     .1755186    .5852188
    _Iyear_2 |  -.1050156   .0150375    -6.98   0.000    -.1346465   -.0753847
       _cons |    1.36695   .1697174     8.05   0.000     1.032527    1.701373
------------------------------------------------------------------------------
.         outreg2    l_aadt  Dl_pop using revision/table7.xls,ctitle(OLS `R')  `instruct' append;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  .
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .31744898
.         local t8=`t8'+1;
.         xi: reg    Dl_aadt l_aadt Dl_pop  `geography' `census_div' i.year, cl(msa) robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)
note: div9 omitted because of collinearity.

Linear regression                               Number of obs     =        456
                                                F(16, 227)        =      14.08
                                                Prob > F          =     0.0000
                                                R-squared         =     0.3893
                                                Root MSE          =      .1488

                                      (Std. err. adjusted for 228 clusters in msa)
----------------------------------------------------------------------------------
                 |               Robust
         Dl_aadt | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
          l_aadt |  -.1652829   .0213647    -7.74   0.000    -.2073813   -.1231845
          Dl_pop |    .475247   .1084693     4.38   0.000     .2615117    .6889824
elevat_range_msa |   .0287662   .0173674     1.66   0.099    -.0054557    .0629882
  ruggedness_msa |   .3294908   .9619765     0.34   0.732    -1.566055    2.225036
      heating_dd |  -.0029687   .0014297    -2.08   0.039     -.005786   -.0001515
      cooling_dd |  -.0060894    .003685    -1.65   0.100    -.0133506    .0011717
          sprawl |  -.0023747    .000984    -2.41   0.017    -.0043138   -.0004357
            div1 |   .1980819   .0644834     3.07   0.002     .0710195    .3251444
            div2 |   .1381976   .0531421     2.60   0.010     .0334826    .2429125
            div3 |   .1590357   .0599663     2.65   0.009      .040874    .2771974
            div4 |   .1223603    .062941     1.94   0.053    -.0016629    .2463836
            div5 |   .1612215   .0539612     2.99   0.003     .0548925    .2675505
            div6 |    .172471   .0534576     3.23   0.001     .0671344    .2778075
            div7 |   .0360525   .0584227     0.62   0.538    -.0790677    .1511727
            div8 |   -.026346   .0385689    -0.68   0.495    -.1023449    .0496529
            div9 |          0  (omitted)
        _Iyear_2 |  -.0857588   .0151977    -5.64   0.000    -.1157054   -.0558122
           _cons |   1.951555   .2508158     7.78   0.000      1.45733     2.44578
----------------------------------------------------------------------------------
.         outreg2    l_aadt  Dl_pop using revision/table7.xls,ctitle(OLS `R')  `instruct' append;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  .
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .38933818
.         local t8=`t8'+1;
.         xi: reg    Dl_aadt l_aadt Dl_pop  `geography' `census_div' `population' `demographics' i.year, cl(msa) robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)
note: div9 omitted because of collinearity.

Linear regression                               Number of obs     =        456
                                                F(28, 227)        =      12.66
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4433
                                                Root MSE          =     .14406

                                      (Std. err. adjusted for 228 clusters in msa)
----------------------------------------------------------------------------------
                 |               Robust
         Dl_aadt | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
          l_aadt |  -.2156646   .0292049    -7.38   0.000    -.2732119   -.1581172
          Dl_pop |   .2927822   .1365498     2.14   0.033     .0237149    .5618495
elevat_range_msa |   .0050527   .0160864     0.31   0.754    -.0266451    .0367505
  ruggedness_msa |   .1795612   1.120898     0.16   0.873    -2.029134    2.388257
      heating_dd |  -.0023162   .0014841    -1.56   0.120    -.0052406    .0006082
      cooling_dd |  -.0059921   .0043015    -1.39   0.165    -.0144681    .0024839
          sprawl |  -.0019319   .0010713    -1.80   0.073    -.0040429    .0001792
            div1 |   .1185074   .0720654     1.64   0.101    -.0234953      .26051
            div2 |   .0324854   .0680282     0.48   0.633    -.1015621     .166533
            div3 |   .0645085   .0719779     0.90   0.371    -.0773218    .2063388
            div4 |   .0659597   .0692532     0.95   0.342    -.0705016     .202421
            div5 |   .0746505   .0631126     1.18   0.238    -.0497109    .1990119
            div6 |    .070543   .0661321     1.07   0.287    -.0597683    .2008543
            div7 |  -.0144295   .0653154    -0.22   0.825    -.1431316    .1142726
            div8 |   -.042423   .0415123    -1.02   0.308    -.1242217    .0393757
            div9 |          0  (omitted)
         l_pop80 |    .206675   .1550862     1.33   0.184    -.0989177    .5122676
         l_pop70 |   .1636453   .2121518     0.77   0.441    -.2543932    .5816839
         l_pop60 |  -.3731334   .1676024    -2.23   0.027    -.7033888   -.0428779
         l_pop50 |   .0333557    .098161     0.34   0.734    -.1600676     .226779
         l_pop40 |   .0127891   .1007401     0.13   0.899    -.1857163    .2112944
         l_pop30 |  -.0255192   .1260302    -0.20   0.840    -.2738578    .2228194
         l_pop20 |   .0237007   .0623952     0.38   0.704    -.0992472    .1466485
   S_somecollege |  -.2399274   .1454878    -1.65   0.101    -.5266066    .0467518
   l_mean_income |  -.0493202   .1266918    -0.39   0.697    -.2989625    .2003221
  seg1980_ghetto |   .0021894   .0197052     0.11   0.912    -.0366391     .041018
          S_poor |   .2802914   .2051348     1.37   0.173    -.1239204    .6845033
         S_manuf |   .2521863    .102352     2.46   0.014     .0505048    .4538678
        _Iyear_2 |  -.0003365   .0294889    -0.01   0.991    -.0584435    .0577705
           _cons |   2.267117   1.225866     1.85   0.066    -.1484152    4.682648
----------------------------------------------------------------------------------
.         outreg2    l_aadt  Dl_pop using revision/table7.xls,ctitle(OLS `R')  `instruct' append;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  .
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .44330282
.         local t8=`t8'+1;
.         xi: xtreg  Dl_aadt l_aadt i.year, fe robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)

Fixed-effects (within) regression               Number of obs     =        456
Group variable: msa                             Number of groups  =        228

R-squared:                                      Obs per group:
     Within  = 0.8156                                         min =          2
     Between = 0.1166                                         avg =        2.0
     Overall = 0.1421                                         max =          2

                                                F(2,227)          =     501.25
corr(u_i, Xb) = -0.9462                         Prob > F          =     0.0000

                                  (Std. err. adjusted for 228 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
     Dl_aadt | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      l_aadt |  -.9783179   .0454049   -21.55   0.000    -1.067787   -.8888488
    _Iyear_2 |   .2715491   .0224208    12.11   0.000     .2273695    .3157286
       _cons |   8.572812   .3772998    22.72   0.000     7.829354     9.31627
-------------+----------------------------------------------------------------
     sigma_u |  .50253053
     sigma_e |  .08536442
         rho |  .97195377   (fraction of variance due to u_i)
------------------------------------------------------------------------------
.         outreg2    l_aadt using revision/table7.xls,ctitle(FE `R')  `instruct' append;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  .
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .81558931
.         local t8=`t8'+1;
.         xi: ivreg2 Dl_aadt l_aadt  (Dl_pop =g_exp) S_manuf i.year `geography' `census_div', cl(msa) robust ;
i.year            _Iyear_1-2          (_Iyear_1 for year==_1993 omitted)
Warning - collinearities detected
Vars dropped:       div9

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on msa

Number of clusters (msa) =         228                Number of obs =      456
                                                      F( 17,   227) =    13.74
                                                      Prob > F      =   0.0000
Total (centered) SS     =  15.91776511                Centered R2   =   0.3936
Total (uncentered) SS   =  72.77958394                Uncentered R2 =   0.8674
Residual SS             =  9.652767071                Root MSE      =    .1455

----------------------------------------------------------------------------------
                 |               Robust
         Dl_aadt | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
          Dl_pop |   .6924318   .3051569     2.27   0.023     .0943353    1.290528
          l_aadt |  -.1663131   .0200256    -8.31   0.000    -.2055626   -.1270637
         S_manuf |   .2799025   .0936837     2.99   0.003     .0962858    .4635192
        _Iyear_2 |  -.0758825   .0152933    -4.96   0.000    -.1058569   -.0459082
elevat_range_msa |   .0209236   .0183495     1.14   0.254    -.0150407    .0568878
  ruggedness_msa |   .5460359    .989669     0.55   0.581     -1.39368    2.485752
      heating_dd |   -.002324   .0014349    -1.62   0.105    -.0051363    .0004883
      cooling_dd |  -.0058474   .0047137    -1.24   0.215    -.0150861    .0033913
          sprawl |  -.0027692   .0009795    -2.83   0.005    -.0046889   -.0008495
            div1 |   .1855116   .0664011     2.79   0.005     .0553678    .3156554
            div2 |   .1228109   .0614906     2.00   0.046     .0022915    .2433302
            div3 |   .1404807   .0665093     2.11   0.035     .0101249    .2708366
            div4 |   .1051904   .0630193     1.67   0.095    -.0183251    .2287058
            div5 |   .1579426   .0625712     2.52   0.012     .0353052      .28058
            div6 |   .1630419   .0634612     2.57   0.010     .0386603    .2874236
            div7 |   .0475837    .070885     0.67   0.502    -.0913484    .1865158
            div8 |  -.0317648   .0373964    -0.85   0.396    -.1050604    .0415309
            div9 |          0  (omitted)
           _cons |   1.866207   .2362285     7.90   0.000     1.403208    2.329207
----------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             31.559
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               69.575
                         (Kleibergen-Paap rk Wald F statistic):         47.571
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         Dl_pop
Included instruments: l_aadt S_manuf _Iyear_2 elevat_range_msa ruggedness_msa
                      heating_dd cooling_dd sprawl div1 div2 div3 div4 div5 div6
                      div7 div8
Excluded instruments: g_exp
Dropped collinear:    div9
------------------------------------------------------------------------------
.         outreg2    l_aadt Dl_pop using revision/table7.xls,ctitle(IV `R')  `instruct2' append;
revision/table7.tex
revision/table7.xls
dir : seeout
.                 estimates store modelT8_`t8';
.         estadd scalar FSS = e(widstat);

added scalar:
                e(FSS) =  47.571055
.         estadd scalar OpV = e(jp);

added scalar:
                e(OpV) =  .
.         estadd scalar R2 = e(r2);

added scalar:
                 e(R2) =  .39358528
.         local t8=`t8'+1;
.         log close;
      name:  <unnamed>
       log:  C:\Users\USUARIO\OneDrive - Universidad de los Andes\Uniandes\Urban Economics\Proyecto\Revised-reproduction-package-for-Duranton-G.-Turn
> er-M.-A.-2011-\Deliverable_1\Data_original\revision/table7.log
  log type:  text
 closed on:  29 May 2022, 23:25:54
-----------------------------------------------------------------------------------------------------------------------------------------------------
